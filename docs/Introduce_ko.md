![](thumbnail.png)

태고 하다 보면..

1. 내가 약한 패턴만 골라서 연습하고 싶을 때
2. 특정 구간만 미스 안내면 풀콤인데, 그 부분만 집중 연습하고 싶을 때

그래서, 원하는 패턴을 효율적으로 연습할 수 있는 방법이 없을까 고민하다가
직접 패턴을 만들거나 랜덤 패턴으로, 메트로놈 박자에 맞춰 연습할 수 있는 프로그램을 만들어봤어

---

# 0. 이 프로그램의 장점 (다른 에뮬레이터, TJA 등과 비교)

1. 저작권 문제에서 비교적 자유로움
2. 1ms 단위로 정확한 판정 정보 제공
3. 연습하고 싶은 패턴이 있는 곡을 굳이 찾지 않아도 됨. 직접 만들기 쉬움

곡을 플레이하는 재미는 없지만 패턴 연습에 초점을 맞췄어

---

# 1. 사용법

## 컨트롤

- 지금은 키보드만 지원
- 북 컨트롤러 쓰려면 키보드 모드로 써줘.
	- 따오콘은 키보드 모드 있음. 이이네나 다른 건 잘 모르겠음
	- 호리 타타콘은 키보드 모드가 없어서 일반 게임 컨트롤러로 인식돼. 이럴 땐 [Joy2Key](https://joytokey.net/en/)로 컨트롤러 입력을 키보드로 매핑해줘

- 기본 키: 캇(DK + EO), 동(FJ + RI)
- 아케이드처럼 스킵 기능 있음. 캇을 빠르게 2번 입력하면 5칸씩 이동해
- 메인 화면에서 ESC를 꾹 누르면 프로그램 종료
- 메인이 아닌 씬에서 오른쪽 캇을 8번 치면 Pause 팝업창이 떠

## 설정
![](setting.png)

### 플레이 설정
- BPM: 메트로놈 속도
- Speed: 노트 속도
- Minimum Notes: 연습할 노트 최소 개수
- Target Accuracy: 목표 정확도. 0% 이상이면 노트 위에 체력바 생기고, 다 닳으면 아래 On Fail 동작
	- Accuracy: `(2*량 + 가) / (2*전체노트)`, 100만점 곱하면 대충 아케이드 점수
- Fail on Bad: 불가 나오면 On Fail 동작
- On Fail
	- None: 무시
	- RestartMap: 처음부터 다시
	- RestartPattern: 최근 패턴부터
	- RestartBar: 현재 마디(=4박자)부터
	- Result: 결과창 띄움
- Modifier: 노트 타입 바꿈
	- Detarame: 50% 확률로 동/캇 바꿈
	- Abekobe: 100% 확률로 동/캇 바꿈
- Pattern Shuffle: 패턴 섞는 방식
	- None: 순서대로
	- Bag: 테트리스 가방 시스템처럼 셔플
	- FullRandom: 완전 랜덤

### 오디오 설정
- 오디오 출력 방식은 ASIO, WASAPI 두 가지가 있어
- ASIO: 저지연이라 가능하면 이걸 써. 메인보드 사운드 칩셋이 지원 안 하면 못 써
	- 하드웨어에서 지원 안하면 ASIO4ALL를 사용해서 지원하는 것 처럼 흉내 낼 수 있는데, 실제 지원하는 하드웨어보단 성능이 떨어질 수 있어
	- 자세한 건 [디맥 판정 가이드](https://steamcommunity.com/sharedfiles/filedetails/?l=koreana&id=2448724066) 참고
- WASAPI: 윈도우용. ASIO보다 느려. FMOD 엔진이 단독 모드 지원 안 해서 공유모드만 가능

---

# 2. 패턴 연습 모드

![](patternpractice_item2.png)
![](patternpractice_item.png)

메인 아래쪽에 노란 폴더들이 보이고 동으로 선택해서 해당 폴더에 있는 파일들을 로딩함
기본 제공 폴더는

1. ㄷㄷㅋ 등 자주 나오는 노트 집중 연습용
2. 실제 태고의 달인 곡에서 어려운 부분만 뽑은 패턴

이렇게 있어.
실제 패턴은 내가 연습하고 싶은 곡 위주만 있고 몇 개 없어 ㅠ 시간상 다 만들긴 불가능..
어려운 패턴 뽑는 기준도 내맘대로야.
연습용 패턴은 생각 나는데로 넣었는데 뭘 더 넣을지 모르겠다.

패턴을 직접 만들고 싶으면 아래 `4. 직접 패턴 만들기` 참고

패턴을 선택하면
- 위에 간단한 미리보기 노트
- BPM 등 플레이 설정

이 나와

## 플레이

- Play 버튼을 선택하면 패턴 연습 시작
- 옆에 설정에서 플레이 설정을 바꿀 수 있음

## 곡 패턴 연습

![](thumbnail.png)

### 통계 설명
- Good / Ok / Bad: 량/가/불가 개수
- Accuracy: `(2*량 + 가) / (2*전체노트)`
- Avg Diff: 평균 판정 차이 (+면 빠름, -면 느림)
- Std Diff: 표준편차 (10ms 정도면 안정적)
- Finesses: 왼손/오른손 번갈아 친 정도 (한손만 쓰면 값 낮음)

### 기타 기능
- 오른쪽 캇 8번 연속 치면 중단
- 마우스 드래그로 UI 위치 이동 가능
- Target Accuracy 설정하면 노트 위에 체력바 생김

### 토글 기능
![](toggles.png)

- 1: 메트로놈 소리 뮤트
- 2: 태고 소리 뮤트
- 3: 태고 노트 UI
- 4: 건반 게임 UI
- A: 오토 모드
- 오토 모드이거나 Fail로 다시 시작하면 기록 안 됨 (왕관X 표시)

---

# 3. 판정 맞추기
- 하드웨어 이슈로 지연이 발생해서 판정이 안 맞을 수 있으니 아래의 방법을 통해 보정


1. 패턴 연습 모드에서 `A. Basic > 00. 4th Notes` 플레이
2. 2번 키를 눌러 키음을 뮤트 (중요!)
3. 눈 감고 메트로놈 소리에 맞춰 캇동동동 x 16번 입력
4. 결과 창에 Avg Diff 확인

- 판정이 느린 경우 (avg diff가 -):
    - 오디오 출력 지연
        - 이게 제일 큼, 나도 WASAPI 쓰면 40ms 정도 지연 생김
		- ASIO 지원 안되는 경우 키음 뮤트하고 메트로놈 소리를 Avg Diff 만큼 +로 당기기
    - 컨트롤러(키보드) Polling Rate 낮음
        - 제일 낮은 125hz 짜리 쓰면 8ms 정도 남
		- Setting에서 JudgeOffset +로 이동
- 판정이 빠른 경우 (avg diff가 +):
    - 키음 끈거 맞지? 키음 키면 무의식적으로 키음을 메트로놈이랑 맞출려고 더 빨리 입력하게 됨
    - 본인이 그냥 빠르게 치는거에 익숙해져 있을 가능성이 있음
    - 메트로놈 소리를 -로 당기기

- 눈 판정
	- 메트로놈 소리도 끄고 판정선만 보고 맞추기
	- Setting에서 Draw Offset이 +면 실제 판정선이 왼쪽으로 감, - 면 오른쪽

- PC, 키보드, 모니터, 오디오 기기 등 변수 많으니 하나씩 바꿔가며 문제 찾아야 함

# 4. 직접 패턴 만들기

```yaml
description: 24비트 연타랑 중간에 8비트 들어간 리듬
options: # 덮어쓸 설정
  bpm: 150
  minimumNotes: 300 # 연습할 노트 수
patterns:
- <6>{d..ddd?..d.., ddd?..d..d.., d..d..ddd?..}*4
```

패턴은 대략 이런 식으로 YAML 포맷으로 되어 있어

- PatternMap 폴더에 서브 폴더 만들고 거기에 yaml 파일 만들고 패턴 작성
- 폴더 내에서 파일이 변경되면 프로그램이 재로딩하니 파일 바꿨다고 프로그램 재실행 안해도 됨

자세한 패턴 문법은 [이 문서](HowToMakePattern_ko.md) 참고

---

# 5. Drumometer

![](drumometer.png)

- 싱글 연타 측정 모드. 5/10/30/60 초 모드.
- 양손 번갈아 쳐야 입력돼. 한손만 치면 입력 안 됨.
- 오른쪽 캇 8번 치면 바로 종료.
- 16비트로 환산해서 BPM 표시

---

# 6. 기록 모드

![](recording.png)

- 입력한 노트를 실시간으로 보여주는 모드.
- 머릿속 패턴을 정확히 입력할 수 있는지 테스트하는 용도.
- 왼쪽 캇 8번 치면 기록 중단, 캇으로 이동하며 친 노트들 볼 수 있음.
	- 이때 동 치면 씬에서 나가짐.

---

# 마무리


좋은 의견 있으면 여기에 남겨줘. 현생 바빠서 될지는 모름 ㅠ

